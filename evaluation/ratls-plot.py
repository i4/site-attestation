import sys

import matplotlib

matplotlib.rcParams["font.family"] = "STIXGeneral"
matplotlib.rcParams["mathtext.fontset"] = "stix"
matplotlib.rcParams["mathtext.rm"] = "Bitstream Vera Sans"
matplotlib.rcParams["mathtext.it"] = "Bitstream Vera Sans:italic"
matplotlib.rcParams["mathtext.bf"] = "Bitstream Vera Sans:bold"

import matplotlib.pyplot as plt
import numpy as np

plot_path = "out/"
saveToPGF = sys.argv.__len__() >= 1 and sys.argv.__contains__("save")

if saveToPGF:
    matplotlib.use("pgf")
    matplotlib.rcParams.update(
        {
            "pgf.texsystem": "pdflatex",
            # "font.size": 100,  # Set the desired font size here
            "axes.labelsize": 20,
            "xtick.labelsize": 15,
            "ytick.labelsize": 15,
            "legend.fontsize": 20,
            # "figure.titlesize": 100,
            # Additional settings to use LaTeX fonts
            # "font.family": "serif",
            # "text.usetex": True,
            # "pgf.rcfonts": False,
        }
    )


def output_plot(plt, name):
    if saveToPGF:
        plt.tight_layout()

        plt.savefig(f"{plot_path}{name}.pgf")
    else:
        plt.show()


def plot_layered_histogram(
    name, datasets, labels, colors, bins=10, alpha=1.0, edgecolor=None
):
    plt.figure()

    # calculate bar borders
    if isinstance(bins, int):
        all_data = np.concatenate(datasets)
        bins = np.linspace(min(all_data), max(all_data), bins + 1)

    for i, data in enumerate(datasets):
        plt.hist(
            data,
            bins=bins,
            label=labels[i] if labels else None,
            edgecolor=edgecolor,
            color=colors[i],
            alpha=alpha,
            zorder=i,
        )

    plt.xlabel("Duration (ms)")
    plt.ylabel("Frequency")
    plt.legend()

    output_plot(plt, name)


# Datasets
ravm_unknown = [
    1758.36181640625,
    1846.710205078125,
    1673.8524436950684,
    1734.7278594970703,
    1650.4404544830322,
    1652.723789215088,
    1602.0426750183105,
    1802.9537200927734,
    1739.7806644439697,
    1635.265827178955,
    1606.8511009216309,
    1707.1805000305176,
    1600.6085872650146,
    1752.2847652435303,
    1691.4570331573486,
    1728.039264678955,
    1640.8038139343262,
    1617.170810699463,
    1640.043020248413,
    1601.966142654419,
    1559.422492980957,
    1788.367748260498,
    1627.1576881408691,
    1740.7996654510498,
    1589.9536609649658,
    1661.7381572723389,
    1791.7821407318115,
    1618.7305450439453,
    1681.070327758789,
    1884.117603302002,
    1823.6703872680664,
    2143.5585021972656,
    1901.2699127197266,
    1901.6432762145996,
    1700.2928256988525,
    1752.6226043701172,
    1600.5442142486572,
    1781.1024188995361,
    1757.6301097869873,
    1630.241870880127,
    1889.7333145141602,
    1683.9427947998047,
    1596.1875915527344,
    1693.5334205627441,
    1616.429328918457,
    1691.4169788360596,
    1827.538013458252,
    1688.2126331329346,
    2203.7808895111084,
    1623.6355304718018,
    1629.0433406829834,
    1613.3873462677002,
    1633.6579322814941,
    1631.0009956359863,
    1648.7782001495361,
    1661.149263381958,
    1724.5762348175049,
    1633.0788135528564,
    1681.7026138305664,
    1725.4571914672852,
    1583.4012031555176,
    1628.7400722503662,
    1705.3039073944092,
    1589.0462398529053,
    1586.047649383545,
    1670.7215309143066,
    1913.2881164550781,
    1601.3221740722656,
    1703.7014961242676,
    1604.8097610473633,
    1670.517921447754,
    1574.9413967132568,
    1599.9410152435303,
    1975.4128456115723,
    1588.9625549316406,
    1949.3217468261719,
    2075.7758617401123,
    1714.4618034362793,
    1768.20969581604,
    1793.0853366851807,
    1968.205213546753,
    1666.2609577178955,
    1903.7988185882568,
    1663.304328918457,
    1807.0077896118164,
    1743.645191192627,
    1786.5376472473145,
    1837.9700183868408,
    1749.3059635162354,
    1730.853796005249,
    1610.0239753723145,
    1916.2719249725342,
    1940.4094219207764,
    1921.0169315338135,
    1585.8867168426514,
    1656.5637588500977,
    1735.685110092163,
    1567.302942276001,
    1838.4442329406738,
    1589.3807411193848,
]
ravm_known = [
    1278.0613899230957,
    1172.5850105285645,
    1297.1794605255127,
    1238.0859851837158,
    1164.947509765625,
    1243.3936595916748,
    1310.9369277954102,
    1258.7871551513672,
    1251.7387866973877,
    1216.090202331543,
    1296.6935634613037,
    1262.0985507965088,
    1175.21071434021,
    1467.7355289459229,
    1518.5120105743408,
    1273.285150527954,
    1181.1621189117432,
    1161.9250774383545,
    1243.072509765625,
    1220.9413051605225,
    1313.4255409240723,
    1749.1207122802734,
    1278.531789779663,
    1268.5189247131348,
    1367.0299053192139,
    1309.239149093628,
    1337.4910354614258,
    1260.7836723327637,
    1231.3780784606934,
    1356.109857559204,
    1318.9690113067627,
    1214.5042419433594,
    1218.9807891845703,
    1368.5276508331299,
    1320.399284362793,
    1223.3905792236328,
    1240.309476852417,
    1199.9945640563965,
    1297.1534729003906,
    1359.4756126403809,
    1208.0836296081543,
    1350.015640258789,
    1420.6929206848145,
    1212.5704288482666,
    1231.5151691436768,
    1223.3076095581055,
    1507.5697898864746,
    1192.8901672363281,
    1194.7453022003174,
    1254.669427871704,
    1299.4520664215088,
    1312.8166198730469,
    1271.444320678711,
    1289.947509765625,
    1713.6404514312744,
    1161.5254878997803,
    1168.7088012695312,
    1199.390172958374,
    1219.433069229126,
    1347.151756286621,
    1144.205093383789,
    1189.2375946044922,
    1209.1999053955078,
    1362.586498260498,
    1128.197193145752,
    1272.953987121582,
    1278.7625789642334,
    1234.8930835723877,
    1357.2607040405273,
    1189.9971961975098,
    1352.3006439208984,
    1238.152265548706,
    1339.7464752197266,
    1315.2220249176025,
    1252.7062892913818,
    1209.6879482269287,
    1350.8589267730713,
    1226.4878749847412,
    1165.557622909546,
    1233.7791919708252,
    1294.0056324005127,
    1367.8030967712402,
    1182.2178363800049,
    1281.2161445617676,
    1358.3214282989502,
    1266.0481929779053,
    1276.8096923828125,
    1224.3404388427734,
    1226.7341613769531,
    1375.6651878356934,
    1236.3739013671875,
    1255.3293704986572,
    1207.8526020050049,
    1183.6953163146973,
    1159.7387790679932,
    1169.4893836975098,
    1235.3496551513672,
    1208.3439826965332,
    1254.2643547058105,
    1617.0783042907715,
]
ravm_raw_reload_no_cash = [
    73.65107536315918,
    56.3199520111084,
    62.69359588623047,
    35.5374813079834,
    55.64308166503906,
    52.36482620239258,
    53.69162559509277,
    37.29748725891113,
    61.52200698852539,
    91.06278419494629,
    73.71878623962402,
    55.00435829162598,
    60.50372123718262,
    88.52648735046387,
    71.6390609741211,
    79.66279983520508,
    19.7904109954834,
    61.75398826599121,
    47.22166061401367,
    69.61321830749512,
    76.13945007324219,
    73.99797439575195,
    31.055212020874023,
    85.53194999694824,
    67.87538528442383,
    69.23675537109375,
    72.49927520751953,
    61.51175498962402,
    45.302629470825195,
    23.438692092895508,
    76.83277130126953,
    81.40039443969727,
    66.02168083190918,
    70.5409049987793,
    82.07082748413086,
    80.91378211975098,
    35.59613227844238,
    55.173635482788086,
    93.00565719604492,
    81.35318756103516,
    71.08283042907715,
    79.65373992919922,
    73.04096221923828,
    94.9409008026123,
    82.42440223693848,
    54.792165756225586,
    75.75178146362305,
    63.462018966674805,
    70.01829147338867,
    82.61346817016602,
    78.54914665222168,
    93.00708770751953,
    82.56912231445312,
    80.36136627197266,
    77.67295837402344,
    83.99772644042969,
    72.5550651550293,
    89.74575996398926,
    68.0077075958252,
    76.6439437866211,
    44.22950744628906,
    83.61601829528809,
    70.2824592590332,
    60.42337417602539,
    104.30645942687988,
    60.3334903717041,
    55.35125732421875,
    101.10855102539062,
    83.06598663330078,
    85.43014526367188,
    83.34112167358398,
    82.46803283691406,
    79.7126293182373,
    45.705556869506836,
    82.64422416687012,
    78.27329635620117,
    75.06442070007324,
    58.368682861328125,
    79.4820785522461,
    81.6502571105957,
    76.42984390258789,
    70.8615779876709,
    61.121225357055664,
    83.75000953674316,
    64.71490859985352,
    34.11078453063965,
    68.18795204162598,
    50.26674270629883,
    86.89641952514648,
    62.53647804260254,
    78.60183715820312,
    70.9385871887207,
    87.47196197509766,
    69.77605819702148,
    74.9056339263916,
    100.63290596008301,
    69.07033920288086,
    49.01742935180664,
    88.28330039978027,
    29.056310653686523,
]
ravm_known_reload_no_cash = [
    29.031038284301758,
    52.6425838470459,
    64.9104118347168,
    27.590274810791016,
    66.88976287841797,
    52.549123764038086,
    53.50518226623535,
    43.48921775817871,
    87.95642852783203,
    77.7747631072998,
    72.88885116577148,
    23.305892944335938,
    61.31577491760254,
    56.77056312561035,
    72.6926326751709,
    65.05823135375977,
    81.14075660705566,
    48.6297607421875,
    63.41552734375,
    68.36676597595215,
    30.0748348236084,
    57.3728084564209,
    81.28499984741211,
    83.80579948425293,
    85.58177947998047,
    81.61354064941406,
    50.57930946350098,
    51.241397857666016,
    82.06486701965332,
    81.34984970092773,
    37.77790069580078,
    79.44488525390625,
    71.33364677429199,
    90.93475341796875,
    77.82745361328125,
    54.67653274536133,
    82.15188980102539,
    85.89982986450195,
    88.88363838195801,
    84.95688438415527,
    77.5456428527832,
    92.59438514709473,
    85.32404899597168,
    91.29023551940918,
    65.52624702453613,
    15.756845474243164,
    85.72745323181152,
    80.20210266113281,
    77.02994346618652,
    92.3771858215332,
    23.08511734008789,
    75.57177543640137,
    79.0109634399414,
    87.42451667785645,
    51.30577087402344,
    84.3503475189209,
    37.10436820983887,
    90.55757522583008,
    77.05497741699219,
    43.46728324890137,
    73.28414916992188,
    81.99882507324219,
    75.35314559936523,
    62.847137451171875,
    87.67151832580566,
    93.01495552062988,
    91.16411209106445,
    82.66186714172363,
    79.92768287658691,
    89.3552303314209,
    79.82707023620605,
    81.18557929992676,
    29.45876121520996,
    88.95015716552734,
    90.44599533081055,
    74.97096061706543,
    81.16698265075684,
    80.83462715148926,
    70.3270435333252,
    80.16395568847656,
    88.64045143127441,
    74.59306716918945,
    68.99523735046387,
    72.36838340759277,
    72.4334716796875,
    31.82816505432129,
    73.03380966186523,
    85.34049987792969,
    70.32942771911621,
    77.48007774353027,
    26.872634887695312,
    77.81124114990234,
    76.49493217468262,
    65.24991989135742,
    75.58608055114746,
    54.2910099029541,
    89.62655067443848,
    85.97254753112793,
    87.88013458251953,
    79.47683334350586,
]
ravm_raw = [
    345.60179710388184,
    152.24361419677734,
    341.30215644836426,
    349.0123748779297,
    143.9497470855713,
    111.6933822631836,
    113.74592781066895,
    190.69766998291016,
    117.46096611022949,
    125.17356872558594,
    106.37497901916504,
    126.63149833679199,
    115.9510612487793,
    116.79267883300781,
    149.6422290802002,
    114.93134498596191,
    118.46733093261719,
    126.39975547790527,
    131.51311874389648,
    116.89543724060059,
    105.38697242736816,
    120.09787559509277,
    132.37786293029785,
    139.25671577453613,
    118.93773078918457,
    146.62480354309082,
    168.2584285736084,
    130.77497482299805,
    146.55804634094238,
    117.66743659973145,
    105.6828498840332,
    128.86548042297363,
    132.87019729614258,
    152.36973762512207,
    101.13048553466797,
    111.91773414611816,
    106.33659362792969,
    144.0889835357666,
    151.261568069458,
    116.87517166137695,
    111.47022247314453,
    155.01761436462402,
    256.56914710998535,
    109.58671569824219,
    133.03565979003906,
    112.58101463317871,
    120.50294876098633,
    160.55703163146973,
    122.07841873168945,
    107.61880874633789,
    148.09679985046387,
    118.43705177307129,
    126.82962417602539,
    189.41044807434082,
    110.07404327392578,
    102.40888595581055,
    152.6327133178711,
    252.45141983032227,
    259.0477466583252,
    116.12629890441895,
    154.36053276062012,
    119.64607238769531,
    154.29139137268066,
    113.01136016845703,
    115.4482364654541,
    227.92768478393555,
    125.92053413391113,
    124.1006851196289,
    161.07940673828125,
    141.10398292541504,
    136.93881034851074,
    141.73102378845215,
    149.8856544494629,
    151.10301971435547,
    157.15384483337402,
    143.15390586853027,
    150.66003799438477,
    142.7474021911621,
    151.1390209197998,
    143.89824867248535,
    151.89480781555176,
    157.6545238494873,
    152.74357795715332,
    147.9623317718506,
    143.51201057434082,
    162.04404830932617,
    158.51545333862305,
    145.11513710021973,
    137.9258632659912,
    135.70404052734375,
    132.8263282775879,
    137.9373073577881,
    161.69977188110352,
    132.5826644897461,
    132.67064094543457,
    148.07558059692383,
    153.8107395172119,
    146.4681625366211,
    157.2580337524414,
    137.8793716430664,
]

ratls_unknown = [
    606.8449020385742,
    663.4516716003418,
    610.2294921875,
    531.1605930328369,
    535.3553295135498,
    517.7812576293945,
    711.6279602050781,
    631.2899589538574,
    514.9683952331543,
    520.442008972168,
    587.554931640625,
    691.6599273681641,
    608.6699962615967,
    539.7224426269531,
    575.5677223205566,
    562.0675086975098,
    547.1935272216797,
    656.5496921539307,
    555.9613704681396,
    571.0110664367676,
    611.6645336151123,
    627.483606338501,
    558.8929653167725,
    532.7601432800293,
    537.498950958252,
    524.235725402832,
    545.0766086578369,
    545.3567504882812,
    716.1128520965576,
    535.6299877166748,
    561.6860389709473,
    536.3223552703857,
    546.5085506439209,
    579.6780586242676,
    553.1761646270752,
    545.1147556304932,
    588.4642601013184,
    553.7822246551514,
    540.2395725250244,
    551.9776344299316,
    553.9848804473877,
    535.7813835144043,
    582.3073387145996,
    555.2949905395508,
    545.9034442901611,
    553.7409782409668,
    540.1349067687988,
    554.0733337402344,
    592.1623706817627,
    561.0027313232422,
    588.6421203613281,
    587.8579616546631,
    576.4541625976562,
    582.5996398925781,
    564.5809173583984,
    572.5476741790771,
    535.6855392456055,
    525.1686573028564,
    553.0188083648682,
    635.5044841766357,
    623.5992908477783,
    603.5385131835938,
    590.0132656097412,
    566.537618637085,
    534.1753959655762,
    566.8649673461914,
    567.6555633544922,
    528.4335613250732,
    545.2570915222168,
    620.7783222198486,
    541.4130687713623,
    569.49782371521,
    649.71923828125,
    548.1719970703125,
    597.2259044647217,
    545.518159866333,
    531.395435333252,
    552.696943283081,
    639.1215324401855,
    592.6926136016846,
    533.4038734436035,
    658.5524082183838,
    564.0604496002197,
    536.2181663513184,
    540.1051044464111,
    544.7254180908203,
    564.2013549804688,
    657.5489044189453,
    639.8868560791016,
    798.6924648284912,
    591.3057327270508,
    835.7336521148682,
    564.3937587738037,
    549.4074821472168,
    716.0806655883789,
    568.2439804077148,
    765.3765678405762,
    577.1427154541016,
    677.8385639190674,
    843.6975479125977,
]
ratls_raw = [
    345.60179710388184,
    152.24361419677734,
    341.30215644836426,
    349.0123748779297,
    143.9497470855713,
    111.6933822631836,
    113.74592781066895,
    190.69766998291016,
    117.46096611022949,
    125.17356872558594,
    106.37497901916504,
    126.63149833679199,
    115.9510612487793,
    116.79267883300781,
    149.6422290802002,
    114.93134498596191,
    118.46733093261719,
    126.39975547790527,
    131.51311874389648,
    116.89543724060059,
    105.38697242736816,
    120.09787559509277,
    132.37786293029785,
    139.25671577453613,
    118.93773078918457,
    146.62480354309082,
    168.2584285736084,
    130.77497482299805,
    146.55804634094238,
    117.66743659973145,
    105.6828498840332,
    128.86548042297363,
    132.87019729614258,
    152.36973762512207,
    101.13048553466797,
    111.91773414611816,
    106.33659362792969,
    144.0889835357666,
    151.261568069458,
    116.87517166137695,
    111.47022247314453,
    155.01761436462402,
    256.56914710998535,
    109.58671569824219,
    133.03565979003906,
    112.58101463317871,
    120.50294876098633,
    160.55703163146973,
    122.07841873168945,
    107.61880874633789,
    148.09679985046387,
    118.43705177307129,
    126.82962417602539,
    189.41044807434082,
    110.07404327392578,
    102.40888595581055,
    152.6327133178711,
    252.45141983032227,
    259.0477466583252,
    116.12629890441895,
    154.36053276062012,
    119.64607238769531,
    154.29139137268066,
    113.01136016845703,
    115.4482364654541,
    227.92768478393555,
    125.92053413391113,
    124.1006851196289,
    161.07940673828125,
    141.10398292541504,
    136.93881034851074,
    141.73102378845215,
    149.8856544494629,
    151.10301971435547,
    157.15384483337402,
    143.15390586853027,
    150.66003799438477,
    142.7474021911621,
    151.1390209197998,
    143.89824867248535,
    151.89480781555176,
    157.6545238494873,
    152.74357795715332,
    147.9623317718506,
    143.51201057434082,
    162.04404830932617,
    158.51545333862305,
    145.11513710021973,
    137.9258632659912,
    135.70404052734375,
    132.8263282775879,
    137.9373073577881,
    161.69977188110352,
    132.5826644897461,
    132.67064094543457,
    148.07558059692383,
    153.8107395172119,
    146.4681625366211,
    157.2580337524414,
    137.8793716430664,
]
ratls_known = [
    245.75400352478027,
    256.1993598937988,
    261.75403594970703,
    234.61055755615234,
    252.77376174926758,
    270.0209617614746,
    249.9220371246338,
    223.38247299194336,
    267.2154903411865,
    233.9937686920166,
    230.1006317138672,
    245.45741081237793,
    251.94334983825684,
    234.69233512878418,
    297.98030853271484,
    258.3179473876953,
    265.4087543487549,
    259.27281379699707,
    336.20405197143555,
    271.64173126220703,
    284.35754776000977,
    238.30103874206543,
    249.86505508422852,
    242.89298057556152,
    209.2149257659912,
    225.37517547607422,
    426.9421100616455,
    446.23255729675293,
    739.8586273193359,
    392.3962116241455,
    461.4238739013672,
    357.71703720092773,
    306.5354824066162,
    221.23289108276367,
    217.12994575500488,
    274.4729518890381,
    226.78470611572266,
    271.41809463500977,
    274.2905616760254,
    1096.2183475494385,
    244.96197700500488,
    208.87255668640137,
    253.59773635864258,
    188.31324577331543,
    206.01415634155273,
    252.9776096343994,
    205.99603652954102,
    239.97020721435547,
    215.9707546234131,
    239.37129974365234,
    207.63206481933594,
    241.91713333129883,
    200.72054862976074,
    269.72055435180664,
    196.63310050964355,
    258.1470012664795,
    211.12585067749023,
    214.64204788208008,
    248.5635280609131,
    196.32911682128906,
    222.24688529968262,
    216.1409854888916,
    248.31128120422363,
    193.6049461364746,
    265.2857303619385,
    241.61767959594727,
    449.7063159942627,
    469.0971374511719,
    247.53403663635254,
    484.50541496276855,
    400.0208377838135,
    393.78881454467773,
    216.57896041870117,
    251.32083892822266,
    410.81905364990234,
    288.8813018798828,
    312.5581741333008,
    317.0909881591797,
    395.1272964477539,
    449.9964714050293,
    419.44217681884766,
    235.64767837524414,
    432.27434158325195,
    380.83958625793457,
    355.2517890930176,
    375.8974075317383,
    439.92137908935547,
    425.54736137390137,
    430.76634407043457,
    422.2371578216553,
    321.5756416320801,
    415.7114028930664,
    281.7683219909668,
    382.6315402984619,
    356.3723564147949,
    276.55744552612305,
    417.95825958251953,
    253.03053855895996,
    361.480712890625,
    256.5960884094238,
]
ratls_unknown_no_freshness = [
    679.6491146087646,
    693.7661170959473,
    574.6278762817383,
    512.0666027069092,
    551.3715744018555,
    645.5276012420654,
    540.7795906066895,
    551.4144897460938,
    508.6703300476074,
    615.3256893157959,
    634.9124908447266,
    515.507698059082,
    552.1771907806396,
    518.7149047851562,
    548.1257438659668,
    477.7684211730957,
    584.7058296203613,
    491.18781089782715,
    512.6650333404541,
    563.4503364562988,
    580.8541774749756,
    531.1696529388428,
    514.9211883544922,
    496.706485748291,
    550.9092807769775,
    566.2896633148193,
    582.6869010925293,
    542.182445526123,
    523.2441425323486,
    521.2349891662598,
    557.6820373535156,
    533.8799953460693,
    567.962646484375,
    539.2060279846191,
    565.1524066925049,
    559.596061706543,
    542.680025100708,
    511.01016998291016,
    609.3225479125977,
    596.7776775360107,
    650.3922939300537,
    545.1610088348389,
    542.4861907958984,
    543.4327125549316,
    572.1399784088135,
    553.2262325286865,
    592.5290584564209,
    623.2316493988037,
    538.4297370910645,
    570.5575942993164,
    546.9799041748047,
    533.0991744995117,
    553.718090057373,
    537.7130508422852,
    540.7471656799316,
    518.160343170166,
    540.1930809020996,
    566.0417079925537,
    549.8197078704834,
    573.4817981719971,
    572.5758075714111,
    613.1036281585693,
    559.6489906311035,
    565.3271675109863,
    569.4863796234131,
    560.4708194732666,
    596.5704917907715,
    604.440450668335,
    562.1452331542969,
    529.9007892608643,
    537.9831790924072,
    560.3094100952148,
    540.8272743225098,
    573.1780529022217,
    573.3413696289062,
    528.8753509521484,
    549.2336750030518,
    567.2793388366699,
    530.6212902069092,
    502.7134418487549,
    516.8890953063965,
    507.53164291381836,
    525.9549617767334,
    506.79755210876465,
    526.4310836791992,
    572.3321437835693,
    480.70383071899414,
    499.2494583129883,
    507.9360008239746,
    549.6492385864258,
    617.8200244903564,
    524.8396396636963,
    533.8633060455322,
    544.2063808441162,
    525.597095489502,
    531.3467979431152,
    544.7440147399902,
    509.08446311950684,
    581.8603038787842,
    531.4476490020752,
]
ratls_known_no_freshness = [
    203.0935287475586,
    290.10558128356934,
    232.1007251739502,
    287.6741886138916,
    226.45998001098633,
    199.85008239746094,
    217.6666259765625,
    182.43169784545898,
    215.48199653625488,
    202.3334503173828,
    217.6506519317627,
    244.16732788085938,
    249.56059455871582,
    229.91228103637695,
    251.0838508605957,
    216.43900871276855,
    184.76223945617676,
    337.2809886932373,
    259.00745391845703,
    230.41653633117676,
    246.52600288391113,
    239.7785186767578,
    220.17860412597656,
    243.499755859375,
    234.33876037597656,
    287.37449645996094,
    233.49475860595703,
    239.3667697906494,
    237.08868026733398,
    234.24053192138672,
    229.53200340270996,
    278.1856060028076,
    236.96041107177734,
    277.3854732513428,
    236.4177703857422,
    247.2996711730957,
    267.1949863433838,
    289.6730899810791,
    256.20317459106445,
    262.5424861907959,
    261.8105411529541,
    244.11344528198242,
    242.4006462097168,
    232.1009635925293,
    237.95533180236816,
    215.6376838684082,
    258.12220573425293,
    255.03134727478027,
    246.63734436035156,
    255.16605377197266,
    282.7603816986084,
    217.08416938781738,
    222.9163646697998,
    304.02255058288574,
    220.39270401000977,
    267.5614356994629,
    276.26562118530273,
    210.5860710144043,
    236.01746559143066,
    267.8086757659912,
    233.1705093383789,
    298.30121994018555,
    251.56903266906738,
    207.8988552093506,
    208.7857723236084,
    207.72361755371094,
    209.91969108581543,
    254.38570976257324,
    302.97327041625977,
    263.3659839630127,
    223.2978343963623,
    230.47113418579102,
    252.80356407165527,
    249.5715618133545,
    250.76699256896973,
    255.2661895751953,
    232.75399208068848,
    232.5725555419922,
    250.14090538024902,
    233.37364196777344,
    235.7926368713379,
    259.10139083862305,
    223.91724586486816,
    249.77970123291016,
    244.13466453552246,
    240.95487594604492,
    221.56047821044922,
    273.3769416809082,
    220.0143337249756,
    273.10752868652344,
    216.4921760559082,
    227.2021770477295,
    224.23958778381348,
    243.05415153503418,
    230.67355155944824,
    251.2044906616211,
    237.5814914703369,
    206.89058303833008,
    228.06477546691895,
    290.47393798828125,
]
ratls_raw_reload_no_cash = [
    62.798261642456055,
    53.7416934967041,
    56.21957778930664,
    40.541887283325195,
    70.80531120300293,
    30.508756637573242,
    53.37667465209961,
    82.45205879211426,
    36.35835647583008,
    79.03766632080078,
    70.70207595825195,
    71.8235969543457,
    59.70335006713867,
    53.15351486206055,
    79.91290092468262,
    68.71700286865234,
    83.41193199157715,
    83.88137817382812,
    80.2602767944336,
    68.50576400756836,
    79.13351058959961,
    80.66511154174805,
    76.91311836242676,
    84.39278602600098,
    62.56866455078125,
    90.26122093200684,
    70.1751708984375,
    29.768943786621094,
    52.881717681884766,
    83.2064151763916,
    30.33590316772461,
    87.43023872375488,
    70.03426551818848,
    98.32596778869629,
    39.3068790435791,
    72.88026809692383,
    89.25652503967285,
    90.58809280395508,
    62.773704528808594,
    37.32419013977051,
    85.56842803955078,
    79.31089401245117,
    82.85784721374512,
    69.26822662353516,
    81.65955543518066,
    70.09005546569824,
    81.5434455871582,
    29.204607009887695,
    88.8824462890625,
    75.2413272857666,
    68.32623481750488,
    93.78838539123535,
    62.66474723815918,
    79.49686050415039,
    81.21895790100098,
    67.30890274047852,
    29.380083084106445,
    26.651382446289062,
    66.83802604675293,
    27.034997940063477,
    73.38070869445801,
    68.3906078338623,
    78.21226119995117,
    49.179792404174805,
    94.90823745727539,
    98.74749183654785,
    106.25481605529785,
    45.937299728393555,
    72.83353805541992,
    96.08721733093262,
    82.83543586730957,
    72.9362964630127,
    29.041290283203125,
    84.83147621154785,
    83.36639404296875,
    48.230886459350586,
    32.095909118652344,
    87.40353584289551,
    72.07489013671875,
    85.63995361328125,
    81.02083206176758,
    62.70790100097656,
    61.8283748626709,
    83.46009254455566,
    42.60110855102539,
    66.79558753967285,
    34.444570541381836,
    48.117637634277344,
    48.54130744934082,
    75.58846473693848,
    74.37276840209961,
    73.74453544616699,
    50.34184455871582,
    82.16547966003418,
    85.01100540161133,
    67.24381446838379,
    80.97362518310547,
    67.23165512084961,
    101.84383392333984,
    99.67374801635742,
]
ratls_known_reload_no_cash = [
    66.75004959106445,
    74.84245300292969,
    84.35726165771484,
    67.34776496887207,
    71.22659683227539,
    81.42209053039551,
    38.2993221282959,
    60.21595001220703,
    75.44422149658203,
    71.50816917419434,
    33.24127197265625,
    51.839351654052734,
    96.83895111083984,
    88.61374855041504,
    43.13325881958008,
    62.29662895202637,
    65.52433967590332,
    102.1890640258789,
    59.82160568237305,
    89.42413330078125,
    83.67753028869629,
    33.50496292114258,
    116.0135269165039,
    64.68677520751953,
    89.20717239379883,
    78.93586158752441,
    87.75019645690918,
    91.62664413452148,
    98.38676452636719,
    44.565439224243164,
    101.75871849060059,
    48.95901679992676,
    51.79286003112793,
    78.11999320983887,
    89.10226821899414,
    74.8746395111084,
    56.00404739379883,
    30.5325984954834,
    53.237199783325195,
    72.7081298828125,
    43.089866638183594,
    42.180776596069336,
    60.1649284362793,
    55.856943130493164,
    34.442901611328125,
    66.86639785766602,
    96.58598899841309,
    49.063682556152344,
    86.17138862609863,
    50.65631866455078,
    59.064388275146484,
    61.4626407623291,
    91.40205383300781,
    92.14425086975098,
    102.66757011413574,
    56.577205657958984,
    97.81646728515625,
    56.708335876464844,
    79.7274112701416,
    54.45051193237305,
    57.126522064208984,
    58.76564979553223,
    70.2967643737793,
    81.86554908752441,
    113.66844177246094,
    76.6305923461914,
    77.15082168579102,
    67.52681732177734,
    56.8239688873291,
    78.31788063049316,
    95.66545486450195,
    62.32571601867676,
    34.374237060546875,
    73.76408576965332,
    109.4505786895752,
    77.08168029785156,
    34.16085243225098,
    78.55606079101562,
    77.36587524414062,
    79.7581672668457,
    59.58676338195801,
    62.049150466918945,
    113.60359191894531,
    71.26760482788086,
    70.59669494628906,
    57.389020919799805,
    68.20464134216309,
    84.04254913330078,
    59.24057960510254,
    48.33507537841797,
    104.68101501464844,
    88.97662162780762,
    86.50708198547363,
    71.98762893676758,
    79.92935180664062,
    74.75495338439941,
    97.03850746154785,
    82.38005638122559,
    69.84305381774902,
    33.33735466003418,
]

# raw
combined_raw = ravm_raw + ratls_raw
print(
    f"Average loading time after {len(combined_raw)} tests: {sum(combined_raw) / len(combined_raw)} ms"
)
print(f"Lowest: {min(combined_raw)}, highest: {max(combined_raw)}")
plot_layered_histogram(
    "raw",
    datasets=[ravm_raw + ratls_raw],
    labels=["baseline"],
    bins=10,
    colors=["yellow"],
    alpha=0.5,  # Transparenz für schönes Aussehen (0 = unsichtbar, 1 = volle Deckkraft)
    edgecolor="black",
)

# unknown
plot_layered_histogram(
    "unknown",
    datasets=[ravm_unknown, ratls_unknown_no_freshness, ratls_unknown],
    labels=["RAVM", "site attestation", "site attestation (instant AR)"],
    bins=50,
    colors=["red", "blue", "green"],
    alpha=0.5,  # Transparenz für schönes Aussehen (0 = unsichtbar, 1 = volle Deckkraft)
    edgecolor="black",
)

# known
plot_layered_histogram(
    "known",
    datasets=[ravm_known, ratls_known_no_freshness, ratls_known],
    labels=["RAVM", "site attestation", "site attestation (instant AR)"],
    bins=50,
    colors=["red", "blue", "green"],
    alpha=0.5,  # Transparenz für schönes Aussehen (0 = unsichtbar, 1 = volle Deckkraft)
    edgecolor="black",
)

# reload
plot_layered_histogram(
    "reload",
    datasets=[
        ravm_known_reload_no_cash,
        ratls_known_reload_no_cash,
        ravm_raw_reload_no_cash,
    ],
    labels=["RAVM", "site attestation", "baseline"],
    bins=10,
    colors=["red", "green", "yellow"],
    alpha=0.5,  # Transparenz für schönes Aussehen (0 = unsichtbar, 1 = volle Deckkraft)
    edgecolor="black",
)
